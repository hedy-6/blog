# ES 2020

## BigInt

不是数字类型

```
let a = Number.MAX_SAFE_INTEGER
++a // 9007199254740992
++a // 9007199254740992

let b = 9007199254740992n;
++b; // 9007199254740993n
++b; // 9007199254740994n
```

## Dynamic import 动态引入

动态引入，不会污染全局名称
```
async function getName(a) {
  if (a === "a") {
    const module = await import("./data.js");
    console.info(module);
  }
}
// getName("a");
getName("b");
```
## Nullish Coalescing 空值合并

`??` 是一个逻辑操作符，当左侧的操作数为 null 或者 undefined 时，返回其右侧操作数，否则返回左侧操作数。

```
console.log(undefined ?? "some value"); // some value
console.log(null ?? "some value"); // some value
console.log(NaN ?? "some value"); // NaN
```

## Optional Chaining 可选链操作符

允许读取位于连接对象链深处的属性的值，而不必明确验证链中的每个引用是否有效。?. 操作符的功能类似于 . 链式操作符，不同之处在于，在引用为空(nullish ) (null 或者 undefined) 的情况下不会引起错误，该表达式短路返回值是 undefined。与函数调用一起使用时，如果给定的函数不存在，则返回 undefined。

```
const obj = {
  name: "大漂亮",
  age: 38,
  children: [
    {
      name: "小漂亮",
      age: 12,
    },
  ],
};
console.log(obj.children[0].name); // 小漂亮
console.log(obj.children[1]?.name); // undefined
```

## Promise.allSettled

该Promise.allSettled()方法返回一个在所有给定的promise都已经fulfilled或rejected后的promise，并带有一个对象数组，每个对象表示对应的promise结果。

当您有多个彼此不依赖的异步任务成功完成时，或者您总是想知道每个promise的结果时，通常使用它。

相比之下，Promise.all() 更适合彼此相互依赖或者在其中任何一个reject时立即结束。

const promiseAll = [
  Promise.resolve(100),
  Promise.reject(null),
  Promise.reject("no"),
];
Promise.allSettled(promiseAll).then((results) => {
  console.info(results);
  // [
  //   { status: "fulfilled", value: 100 },
  //   { status: "rejected", reason: null },
  //   { status: "rejected", reason: "no" },
  // ];
});

## String#matchAll

## globalThis
globalThis 包含全局的 this 值，类似于全局对象（global object）。

## Module Namespace Exports

```
import * as utils from './utils.mjs'
export { utils }
```

## Well defined for-in order
 for (x in y) 的顺序

## import.meta

是一个给JavaScript模块暴露特定上下文的元数据属性的对象。它包含了这个模块的信息，比如说这个模块的URL。